

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Beluki</title>
        <link rel="stylesheet" href="/static/style.css" type="text/css">
        <link rel="stylesheet" href="/static/codehilite.css" type="text/css">
    </head>

    <body>
        <div class="top-bar">
            <ul>
                <li> <a href="/">índice</a> </li>
                <li> <a href="/archive/">archivo</a> </li>
                <li> <a href="/page/about/">acerca de</a> </li>
            </ul>
        </div>
        <div class="wrapper">
            
    

    
        
    

    
        


<div class="title">
    The shocking Miss Emerald
</div>

<div class="subtitle">
    octubre 19, 2013

    <div class="multilink">
        
            <a href="/archive/musica/">música</a>

            
        
    </div>
</div>

<div class="content">
    <p><img src="/static/8.png" alt="cover"></p>
<p>Hacía tiempo que un grupo (o un artista) no me enganchaba tanto. Si no
has escuchado ya algo de Caro, estás <a href="http://www.youtube.com/watch?v=6QUmPZmkr4I">tardando</a> en hacerlo. Qué voz.
Aún no tengo claro si es jazz, tango, swing o qué, pero el caso es
que la mezcla funciona a la perfección.</p>
</div>


        <div class="multilink">
            <a href="/post/the-shocking-miss-emerald/">permalink</a> |
            <a href="/post/the-shocking-miss-emerald/#disqus_thread">comentarios</a>
        </div>
    
        


<div class="title">
    Magia de cerca
</div>

<div class="subtitle">
    octubre 17, 2013

    <div class="multilink">
        
            <a href="/archive/poesia/">poesía</a>

            
        
    </div>
</div>

<div class="content">
    <pre class="poetry">
    Me dijo: tú mira, mira,
    Yo vaya que si miraba,
    los naipes sobre la mesa
    y nada bajo las mangas.

    Un truco te quiero hacer,
    tú memoriza una carta,
    el dos de copas, pensé,
    ni los bastos ni la espada.

    ¿Y los oros no te gustan?
    me gustan tus manos blancas.

    Cortó sin más, por el centro,
    dividiendo la baraja,
    pude observar que no había,
    cartón alguno ni trampa.

    Me miró como ese niño
    que algo esconde pero calla.
    ¿Será ésta? - yo le dije:
    ¡no puede ser! ¡esto es magia!

    Magia sí, pero de cerca,
    es magia sobre las palmas,
    una mentira tan bella
    hay que contarla en voz baja.

    ¿Te gusta, mi corazón?
    me gustan tus manos blancas.
</pre>

<p>Es un poema que escribí anoche y ahora comparto aquí. Creo que estoy
razonablemente satisfecho con el resultado, aunque he de confesar que
hace tiempo que no escribo poesía.</p>
</div>


        <div class="multilink">
            <a href="/post/magia-de-cerca/">permalink</a> |
            <a href="/post/magia-de-cerca/#disqus_thread">comentarios</a>
        </div>
    
        


<div class="title">
    Un solo turno
</div>

<div class="subtitle">
    octubre 16, 2013

    <div class="multilink">
        
            <a href="/archive/ficcion/">ficción</a>

            
        
    </div>
</div>

<div class="content">
    <p>La idea es singular y atractiva: <a href="http://es.wikipedia.org/wiki/Aventura_conversacional">aventuras conversacionales</a> en las que
el jugador solo puede ejecutar una acción y observar las consecuencias que
se derivan de ella. No hay introducción ni desenlace, únicamente un fragmento
entresacado de una historia mayor.</p>
<p>¿Suena interesante? Es la premisa de <a href="http://ifdb.tads.org/viewgame?id=j49crlvd62mhwuzu">Aisle</a> y de <a href="http://ifdb.tads.org/viewgame?id=22oqimzgf8snv002">Rematch</a>.
La primera ya la conocía y es una de mis aventuras favoritas.
La segunda... me ha decepcionado, quizá porque esperaba otra cosa.</p>
<p>Pese a que ambas comparten premisa, argumentalmente están situadas en polos
opuestos.</p>
<p><a href="http://ifdb.tads.org/viewgame?id=j49crlvd62mhwuzu">Aisle</a> es una exploración narrativa. No hay objetivo alguno. Funciona
porque cada turno permite conocer algún detalle más sobre los personajes
y su situación actual. Es como escoger al azar una página de un libro cerrado
del que apenas recuerdas la sinopsis. Sin entrar en spoilers, es además una
historia cercana con la que cualquiera puede identificarse.</p>
<p><a href="http://ifdb.tads.org/viewgame?id=22oqimzgf8snv002">Rematch</a> es un puzle gigante con muchas partes móviles, un engranaje diseñado
para ser descubierto a partir de la observación de cada elemento. El caso es que
a pesar de lo ingenioso del puzle, al jugar tengo la sensación de que le falta
algo. La necesidad de resolverlo inmediatamente le resta protagonismo a unos
personajes que de por si no son muy carismáticos. El resultado de la mayoría
de las acciones (hasta dar con la solución) es frustrante y repetitivo. El puzle
es tan complejo, que el parser se ha extendido con construcciones nuevas para poder
expresar la solución.</p>
<p>Una pena.</p>
</div>


        <div class="multilink">
            <a href="/post/un-solo-turno/">permalink</a> |
            <a href="/post/un-solo-turno/#disqus_thread">comentarios</a>
        </div>
    
        


<div class="title">
    ExitProcess
</div>

<div class="subtitle">
    septiembre 22, 2013

    <div class="multilink">
        
            <a href="/archive/programacion/">programación</a>

            
        
    </div>
</div>

<div class="content">
    <p>El caso es que estos últimos días he estado dándole vueltas a una idea
interesante para programar un juego, de modo que hoy he estado revisando
<a href="https://github.com/Beluki/4k">4k</a> y <a href="https://github.com/Beluki/4kGL">4kGL</a>, pensando en la posibilidad de usar uno de ellos como
punto de partida.</p>
<p>La idea me gusta lo bastante para haber decidido implementarlo de forma
portable. Probablemente usaré C++ con <a href="http://www.libsdl.org">SDL</a> o <a href="http://haxe.org">Haxe</a>, así que el tema
de hacerlo sobre la API de Windows queda descartado.</p>
<p>Sin embargo, durante el repaso he visto una cosa que no recordaba
y que me ha llamado la atención. El código relevante es el siguiente:</p>
<div class="codehilite"><pre><span class="kt">void</span>
<span class="nf">Shutdown</span> <span class="p">(</span><span class="n">UINT</span> <span class="n">uExitCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>

    <span class="c1">// without WinMainCRTStartup() we must exit the process ourselves:</span>
    <span class="n">ExitProcess</span><span class="p">(</span><span class="n">uExitCode</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>¿Uh? ¿Por qué se llama manualmente a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms682658%28v=vs.85%29.aspx">ExitProcess</a>?</p>
<p>4k y 4kGL están pensados para ser usados sin librería de C. En un programa
normal que sí usa libc, el punto de entrada real no es "WinMain", sino
"WinMainCRTStartup", que se encarga de ejecutar primero WinMain
y luego ExitProcess.</p>
<p>La pregunta se reduce entonces a: ¿Por qué hace falta llamar a ExitProcess?
La respuesta está en la siguiente imagen, tomada de <a href="http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx">Process Explorer</a>:</p>
<p><img src="/static/7.png" alt="Process Explorer"></p>
<p>Un proceso de Windows no se termina hasta que <a href="http://blogs.msdn.com/b/oldnewthing/archive/2010/08/27/10054832.aspx">todos sus hilos terminan</a>.
4kGL en realidad no usa uno, sino dos hilos. El segundo procede del driver
de ATI y se lanza de manera automática al utilizar OpenGL.</p>
</div>


        <div class="multilink">
            <a href="/post/exitprocess/">permalink</a> |
            <a href="/post/exitprocess/#disqus_thread">comentarios</a>
        </div>
    
        


<div class="title">
    Cómo no aprender a programar
</div>

<div class="subtitle">
    septiembre 11, 2013

    <div class="multilink">
        
            <a href="/archive/programacion/">programación</a>

            
        
    </div>
</div>

<div class="content">
    <p>Si me preguntases, hace un tiempo habría dicho que una buena introducción
práctica a la programación sería tratar de resolver los problemas planteados
en los ejercicios del <a href="http://projecteuler.net">Proyecto Euler</a>. Escoger un lenguaje, por ejemplo
Scheme o Python, e ir resolviendo.</p>
<p>A día de hoy mi respuesta sería bien distinta.</p>
<p>El primer problema consiste en calcular la suma de todos los números naturales
menores de 1000 que sean múltiplos de 3 o 5. Una posible solución, escrita
en <a href="http://racket-lang.org">Racket</a>, es la siguiente:</p>
<div class="codehilite"><pre><span class="kn">#lang </span><span class="nn">racket/base</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">multiple-of-3-or-5?</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">zero?</span> <span class="p">(</span><span class="nb">modulo</span> <span class="n">n</span> <span class="mi">3</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">zero?</span> <span class="p">(</span><span class="nb">modulo</span> <span class="n">n</span> <span class="mi">5</span><span class="p">))))</span>

<span class="p">(</span><span class="k">for/fold</span> <span class="p">([</span><span class="n">sum</span> <span class="mi">0</span><span class="p">])</span>
          <span class="p">([</span><span class="n">i</span> <span class="p">(</span><span class="nb">in-range</span> <span class="mi">1000</span><span class="p">)]</span>
           <span class="kd">#:when</span> <span class="p">(</span><span class="n">multiple-of-3-or-5?</span> <span class="n">i</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">+</span> <span class="n">sum</span> <span class="n">i</span><span class="p">))</span>
</pre></div>


<p><a href="http://es.wikipedia.org/wiki/Niklaus_Wirth">Niklaus Wirth</a> dijo allá por 1976 que "algoritmos + datos = programas".
Si analizamos el texto anterior vemos que hay algoritmos, expresados en
forma de función: "multiple-of-3-or-5?", y vemos que hay datos, como el
rango de números de 1 a 1000. ¿Podemos decir entonces que es un programa?
Claramente podemos, pero sin embargo no se parece gran cosa a un programa "real".</p>
<p>Cuando estudié informática, me enseñaron a programar de un modo similar. Nos
proponían pequeños ejercicios, <a href="http://lema.rae.es/drae/?val=puzle">puzles</a>, cosas como: "encuentra el elemento X
en la lista enlazada Y" o "ordena este vector de N elementos". Creo que es una
manera horrible de aprender.</p>
<h2>El otro 90%</h2>
<p>La pregunta clave es: ¿qué falta aquí?.</p>
<p>Cada vez estoy más convencido de que la parte difícil de la programación no es
la algoritmia. Diría que el 10% de un programa es pura algoritmia. El otro
90% es control de errores, I/O a archivos o sockets, localización tanto de
lenguaje como de moneda o huso horario, codificación (unicode, shift-jis, etc),
aprovechamiento de recursos (múltiples procesadores, memoria), diseño modular
en componentes y librerías, interactuar con programas y librerías escritas
por otras personas, portabilidad entre arquitecturas, etc...</p>
<p>No hay nada de eso en el programa anterior.</p>
<p>Crear algo en el laboratorio es fácil, es un entorno seguro sin agentes
externos. Todo está bajo un estricto control. En la vida real, ni siquiera
el enunciado del problema está completamente especificado. Los requerimientos
cambian día a día.</p>
<p>La mayoría de problemas importantes en algoritmia ya han sido resueltos. Las
matemáticas son exactas. Sin embargo, se discute día a día sobre patrones y
métodos para estructurar el código que hagan más sencilla su comprensión. Se
discute sobre dinámicas de trabajo en equipo que permitan a las personas
cooperar más eficientemente.</p>
<p>¿Quieres aprender a programar? Lee el código de un programa que uses día a día
y analíza su diseño. Trata de modificarlo. Ignora "qué" e intenta entender el
porqué de cada decisión y sus consecuencias.</p>
</div>


        <div class="multilink">
            <a href="/post/como-no-aprender-a-programar/">permalink</a> |
            <a href="/post/como-no-aprender-a-programar/#disqus_thread">comentarios</a>
        </div>
    

    
        <div class="prevnext">
            <ul>
                
                    <li> <a href="/">&laquo; siguiente</a> </li>
                

                
                    <li> <a href="/3/">anterior &raquo;</a> </li>
                
            </ul>
        </div>
    

        </div>
    </body>
</html>
